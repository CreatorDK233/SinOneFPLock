C51 COMPILER V9.60.0.0   ISR                                                               04/25/2023 10:52:16 PAGE 1   


C51 COMPILER V9.60.0.0, COMPILATION OF MODULE ISR
OBJECT MODULE PLACED IN .\Objects\ISR.obj
COMPILER INVOKED BY: C:\Keil_v5\C51\BIN\C51.EXE Softwares\ModuleLogic\ISR.c LARGE OMF2 OPTIMIZE(9,SPEED) BROWSE INCDIR(.
                    -\Drivers\Lib\c;.\Drivers\Lib\H;.\Drivers\Lib\IAP_Lib;.\Drivers\Lib\TouchKey_lib;.\Drivers\Physical;.\Drivers\Protocol;.\
                    -Softwares\Application;.\Softwares\Basic;.\Softwares\ModuleLogic) DEBUG PRINT(.\Listings\ISR.lst) TABS(2) OBJECT(.\Object
                    -s\ISR.obj)

line level    source

   1          /* 头文件包含 INCLUDES */
   2          #include "Project.h"
   3          #include "IO.h"
   4          #include "global_variable.h"
   5          #include "BeepMgr.h"
   6          
   7          uint16_t TimeCunt1024Hz = 0;
   8          uint8_t UART2_RXBUFFER[2];
   9          
  10          void SysTick_ISR(void)
  11          {
  12   1          G_tflagbits.T1024Hz =1;
  13   1          TimeCunt1024Hz++;
  14   1      
  15   1          //SET_DEBUG_TX_TOGGLE;
  16   1        
  17   1          if ( TimeCunt1024Hz%4==0 )
  18   1          {
  19   2            G_tflagbits.T256Hz =1;
  20   2            
  21   2            if ( TimeCunt1024Hz%8 ==0 )
  22   2            {
  23   3              G_tflagbits.T128Hz =1;
  24   3              if ( TimeCunt1024Hz%16 ==0 )
  25   3              {
  26   4                G_tflagbits.T64Hz =1;
  27   4                if ( TimeCunt1024Hz%64 ==0 )
  28   4                {
  29   5                  G_tflagbits.T16Hz =1;
  30   5                  if ( TimeCunt1024Hz%128==0 )
  31   5                  {
  32   6                    G_tflagbits.T8Hz =1;
  33   6                    if ( TimeCunt1024Hz%512==0 )
  34   6                    {
  35   7                      G_tflagbits.T2Hz =1;  
  36   7                      if ( TimeCunt1024Hz==1024 )
  37   7                      { 
  38   8                        TimeCunt1024Hz = 0;
  39   8                        G_tflagbits.T1Hz =1;
  40   8                      }
  41   7                    }
  42   6                  }
  43   5                } 
  44   4              }
  45   3            }
  46   2          }
  47   1          DEBUG_MARK;
  48   1          return;
  49   1        /* USER CODE END SysTick_IRQn 1 */
  50   1      }
  51          
  52          
C51 COMPILER V9.60.0.0   ISR                                                               04/25/2023 10:52:16 PAGE 2   

  53          //void TIM1_ISR(void)
  54          //{
  55          //  DEBUG_MARK;
  56          //  UART2_TX_Task();
  57          //}
  58          
  59          void TIM3_ISR(void) //300us interval
  60          {
  61   1          DEBUG_MARK;
  62   1        BeepMgrTask();
  63   1          
  64   1      }
  65          
  66          void UART2_ISR(void)
  67          {
  68   1        UART2_RXBUFFER[0]= USXCON3;
  69   1        if (  UART2_Mgr.Status == GotNewCmd )
  70   1        {
  71   2          //do nothing
  72   2        }
  73   1        else if ( (UART2_Mgr.Status == Idle )&&(UART2_RXBUFFER[0]==0xEF) )
  74   1        {
  75   2          UART2_Mgr.RX_Buffer[UART2_Mgr.RX_DataPoint] = UART2_RXBUFFER[0];
  76   2          UART2_Mgr.RX_DataPoint++;
  77   2          UART2_Mgr.Status = ReceivingData;
  78   2        }
  79   1        else if (UART2_Mgr.Status == ReceivingData)
  80   1        {
  81   2          UART2_Mgr.RX_Buffer[UART2_Mgr.RX_DataPoint] = UART2_RXBUFFER[0];
  82   2          UART2_Mgr.RX_DataPoint++;
  83   2          if ((UART2_Mgr.RX_Buffer[0]==0xEF)&&( UART2_Mgr.RX_DataPoint == (UART2_Mgr.RX_Buffer[8]+9))&&( UART2_Mgr
             -.RX_DataPoint >8 ))
  84   2          {
  85   3            UART2_Mgr.Status = GotNewCmd;
  86   3          }
  87   2          else if ( UART2_Mgr.RX_DataPoint > 50)
  88   2          {
  89   3            UART2_Mgr.RX_DataPoint = 0x00;
  90   3            UART2_Mgr.Status = Idle;
  91   3          }
  92   2        }
  93   1            
  94   1        return;
  95   1      }
  96          
  97           
  98          


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    256    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =      4    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
   EDATA SIZE       =   ----    ----
   HDATA SIZE       =   ----    ----
   XDATA CONST SIZE =   ----    ----
   FAR CONST SIZE   =   ----    ----
END OF MODULE INFORMATION.

C51 COMPILER V9.60.0.0   ISR                                                               04/25/2023 10:52:16 PAGE 3   


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
