C51 COMPILER V9.60.0.0   HALLSLIDE                                                         04/19/2023 14:20:23 PAGE 1   


C51 COMPILER V9.60.0.0, COMPILATION OF MODULE HALLSLIDE
OBJECT MODULE PLACED IN .\Objects\HallSlide.obj
COMPILER INVOKED BY: C:\Keil_v5\C51\BIN\C51.EXE Softwares\ModuleLogic\HallSlide.c LARGE OMF2 OPTIMIZE(9,SPEED) BROWSE IN
                    -CDIR(.\Drivers\Lib\c;.\Drivers\Lib\H;.\Drivers\Lib\IAP_Lib;.\Drivers\Lib\TouchKey_lib;.\Drivers\Physical;.\Drivers\Proto
                    -col;.\Softwares\Application;.\Softwares\Basic;.\Softwares\ModuleLogic) DEBUG PRINT(.\Listings\HallSlide.lst) TABS(2) OBJ
                    -ECT(.\Objects\HallSlide.obj)

line level    source

   1          #include "Project.h"
   2          #include "global_variable.h"
   3          #include "IO.h"
   4          #include "LowPower.h"
   5          
   6          #ifdef Function_HallSlideCover
   7          
   8          bit LastHallState = 1;        //正常运行时上次读到霍尔io口的电位值
   9          bit HallSleepFlag = 0;        //霍尔休眠标志
  10          bit SleepingHallState = 0;    //休眠时读到霍尔io口的电位值
  11          
  12          void HallSlideCover_Init(void)
  13          {
  14   1        LastHallState = PINMACRO_HALLSENSOR_STATUS;
  15   1      }
  16          
  17          void HallSleep_Task(void)
  18          {
  19   1        if( LastHallState == 0 )
  20   1        {
  21   2          if( PINMACRO_HALLSENSOR_STATUS == 1 )
  22   2          {
  23   3            HallSleepFlag = 1;
  24   3          }
  25   2        }
  26   1        if( HallSleepFlag == 1 )
  27   1        {
  28   2          //HallSleepFlag = 0;
  29   2          SystemPowerMgr.SleepDelayTimerCnt = 0x0000;
  30   2        }
  31   1        LastHallState = PINMACRO_HALLSENSOR_STATUS;
  32   1      }
  33          
  34          void HallAwakeupDispose(void)
  35          {
  36   1        if( SleepingHallState == 1 )
  37   1        {
  38   2          if( PINMACRO_HALLSENSOR_STATUS == 0 )
  39   2          {
  40   3            MX_QuitLowPowerMode();
  41   3          }
  42   2        }
  43   1        else{
  44   2          if( PINMACRO_HALLSENSOR_STATUS == 1 )
  45   2          {
  46   3            SleepingHallState = 1;
  47   3            LastHallState = 1;
  48   3          }
  49   2        }
  50   1      }
  51          
  52          #endif
C51 COMPILER V9.60.0.0   HALLSLIDE                                                         04/19/2023 14:20:23 PAGE 2   



MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =     45    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =      3    ----
   EDATA SIZE       =   ----    ----
   HDATA SIZE       =   ----    ----
   XDATA CONST SIZE =   ----    ----
   FAR CONST SIZE   =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
