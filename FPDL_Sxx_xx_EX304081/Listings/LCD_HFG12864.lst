C51 COMPILER V9.60.0.0   LCD_HFG12864                                                      04/19/2023 14:20:22 PAGE 1   


C51 COMPILER V9.60.0.0, COMPILATION OF MODULE LCD_HFG12864
OBJECT MODULE PLACED IN .\Objects\LCD_HFG12864.obj
COMPILER INVOKED BY: C:\Keil_v5\C51\BIN\C51.EXE Drivers\Protocol\LCD_HFG12864.c LARGE OMF2 OPTIMIZE(9,SPEED) BROWSE INCD
                    -IR(.\Drivers\Lib\c;.\Drivers\Lib\H;.\Drivers\Lib\IAP_Lib;.\Drivers\Lib\TouchKey_lib;.\Drivers\Physical;.\Drivers\Protoco
                    -l;.\Softwares\Application;.\Softwares\Basic;.\Softwares\ModuleLogic) DEBUG PRINT(.\Listings\LCD_HFG12864.lst) TABS(2) OB
                    -JECT(.\Objects\LCD_HFG12864.obj)

line level    source

   1          #include "IO.h"
   2          #include "spi.h"
   3          #include "Project.h"
   4          #include "Basic_Function.h"
   5          
   6          uint8_t G_DisRAM[1024]={0};
   7          
   8          #ifdef Function_DisplayUsed_HFG12864 
   9          
  10          static uint8_t SwitchPageNumber;
  11          
  12          void WriteComm(uint8_t cmd)
  13          {
  14   1        SET_LCD_DS_L;
  15   1        Soft_Delay_usS(1);
  16   1        SET_LCD_CS_L;
  17   1        Soft_Delay_usS(1);
  18   1        SPI0SendByte(cmd);
  19   1        Soft_Delay_usS(1);
  20   1        SET_LCD_CS_H; 
  21   1        //__asm ("nop");__asm ("nop");__asm ("nop");__asm ("nop");__asm ("nop");
  22   1      }
  23          
  24          void Display_Init(void)
  25          {
  26   1        uint8_t i;
  27   1        
  28   1        SET_LCD_RST_H;  
  29   1        Soft_Delay1ms(1);
  30   1        
  31   1        SET_LCD_RST_L;
  32   1        Soft_Delay1ms(1);
  33   1      
  34   1        SET_LCD_RST_H;
  35   1        Soft_Delay1ms(1);
  36   1        
  37   1      //  SET_LCD_DS_L;
  38   1      //  Soft_Delay1ms(1);
  39   1      //  
  40   1      //  SET_LCD_CS_L;
  41   1      //  Soft_Delay1ms(1);
  42   1       
  43   1        WriteComm(0xe2); //reset
  44   1        WriteComm(0xa3); //LCD BIAS=1/9行写入数据地址加1，但读入不加
  45   1      
  46   1      #if defined ProjectIs_BarLock_S0608 || defined ProjectIs_BarLock_S5514 \
  47   1       || defined ProjectIs_BarLock_S9201 || defined ProjectIs_BarLock_S3007
  48   1        WriteComm(0xa0); //0xA0 or 0xA1, 列地址移动方向:ADC=0(SEG1->SEG132)
  49   1        WriteComm(0xc0); //0xC0 or 0xC8, 行扫描方向:SHL=1(COM64->COM1)
  50   1      #else
                WriteComm(0xa1); //0xA0 or 0xA1, 列地址移动方向:ADC=0(SEG1->SEG132)
                WriteComm(0xc8); //0xC0 or 0xC8, 行扫描方向:SHL=1(COM64->COM1)
C51 COMPILER V9.60.0.0   LCD_HFG12864                                                      04/19/2023 14:20:22 PAGE 2   

              #endif
  54   1      
  55   1        
  56   1        WriteComm(0x2c); //VC ON
  57   1        Soft_Delay1ms(1);
  58   1        WriteComm(0x2e); //VR ON
  59   1        Soft_Delay1ms(1);
  60   1        
  61   1        WriteComm(0x2f); //电源控制模式：VC,VR,VF=111
  62   1        Soft_Delay1ms(1);
  63   1        
  64   1        WriteComm(0x81); //对比度寄存器模式
  65   1        //Hardware_DelayMs(1);
  66   1        WriteComm(0x20); //对比度调整
  67   1        Soft_Delay1ms(1);
  68   1        
  69   1        WriteComm(0x23); //设置电阻分压
  70   1        Soft_Delay1ms(1);
  71   1      
  72   1      
  73   1        for (i=0;i<8;i++)
  74   1        {
  75   2          WriteComm(0x10);// set start and end column addr
  76   2          #if defined ProjectIs_BarLock_S0608 || defined ProjectIs_BarLock_S5514 \
  77   2           || defined ProjectIs_BarLock_S9201 || defined ProjectIs_BarLock_S3007
  78   2          WriteComm(0x01);// set start column addr  
  79   2          #else
                  WriteComm(0x05);// set start column addr
                  #endif    
  82   2      
  83   2          WriteComm(0xB0+i);// set start page addr  
  84   2          
  85   2          SET_LCD_DS_H;
  86   2          Soft_Delay_usS(1);
  87   2          SET_LCD_CS_L;
  88   2          Soft_Delay_usS(1);
  89   2          
  90   2          SPI0SendStr(&G_DisRAM[128*i],128);
  91   2          SET_LCD_CS_H;
  92   2        }
  93   1        
  94   1        //WriteComm(0x10);// set start and end column addr
  95   1        //WriteComm(0x00);// set start column addr
  96   1      
  97   1        WriteComm(0xaf); //开显示
  98   1        Soft_Delay1ms(1);
  99   1      
 100   1        SwitchPageNumber = 0x00;
 101   1        
 102   1      }
 103          
 104               
 105          void Display_Task(void)
 106          {
 107   1        //uint8_t i,j,k;
 108   1        
 109   1        //WriteComm(0x40);// set start Line addr
 110   1      
 111   1        if ( SwitchPageNumber >= 7 )
 112   1        {
 113   2          SwitchPageNumber = 0x00;
 114   2        }
C51 COMPILER V9.60.0.0   LCD_HFG12864                                                      04/19/2023 14:20:22 PAGE 3   

 115   1        else SwitchPageNumber++;
 116   1      //
 117   1        WriteComm(0x10);// set start and end column addr
 118   1        
 119   1        #if defined ProjectIs_BarLock_S0608 || defined ProjectIs_BarLock_S5514 \
 120   1         || defined ProjectIs_BarLock_S9201 || defined ProjectIs_BarLock_S3007
 121   1        WriteComm(0x00);// set start column addr  
 122   1        #else
                WriteComm(0x04);// set start column addr
                #endif  
 125   1        
 126   1        WriteComm(0xB0+SwitchPageNumber);// set start page addr 
 127   1        
 128   1        SET_LCD_DS_H;
 129   1        Soft_Delay_usS(1);
 130   1        SET_LCD_CS_L;
 131   1        Soft_Delay_usS(1);
 132   1      
 133   1        SPI0SendStr(&G_DisRAM[128*SwitchPageNumber],128);
 134   1        SET_LCD_CS_H;
 135   1      }
 136          
 137          
 138          #endif
 139          


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    326    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   1025       2
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
   EDATA SIZE       =   ----    ----
   HDATA SIZE       =   ----    ----
   XDATA CONST SIZE =   ----    ----
   FAR CONST SIZE   =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
